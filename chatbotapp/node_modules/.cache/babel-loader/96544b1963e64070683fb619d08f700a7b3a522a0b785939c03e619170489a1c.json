{"ast":null,"code":"import _toConsumableArray from\"C:/Users/dell/Desktop/ChatBot/server/chatbotapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/dell/Desktop/ChatBot/server/chatbotapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{user}from\"../join/join\";import socketIo from'socket.io-client';import\"./chat.css\";import sendLogo from'../../images/sendlogo.jpg';import Message from'../Message/Message';import ReactScrollToBottom from\"react-scroll-to-bottom\";import closeIcon from\"../../images/closeIcon.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var ENDPOINT=\"http://localhost:4500/\";var Chat=function Chat(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setid=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var send=function send(){var message=document.getElementById('chatInput').value;socket.emit('message',{message:message,id:id});document.getElementById('chatInput').value=\"\";};console.log(messages);useEffect(function(){socket=socketIo(ENDPOINT,{transports:['websocket']});socket.on(\"connect\",function(){alert(\"Connected\");setid(socket.id);});console.log(socket);socket.emit('joined',{user:user});socket.on('welcome',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('userJoined',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('leave',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});return function(){socket.on('disconnect');//iske jagah socket.emit aayega par front end render nhi karta iska dekh \nsocket.off();};},[]);useEffect(function(){socket.on('sendMessage',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message,data.id);});return function(){socket.off();};},[messages]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Chat App\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"/\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:closeIcon,alt:\"Close\"}),\" \"]})]}),/*#__PURE__*/_jsx(ReactScrollToBottom,{className:\"chatBox\",children:messages.map(function(item,i){return/*#__PURE__*/_jsx(Message,{user:item.id===id?'':item.user,message:item.message,classs:item.id===id?'right':'left'});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyPress:function onKeyPress(event){return event.key==='Enter'?send():null;},type:\"text\",id:\"chatInput\"}),/*#__PURE__*/_jsx(\"button\",{onClick:send,className:\"sendBtn\",children:/*#__PURE__*/_jsx(\"img\",{src:sendLogo,alt:\"send\"})})]})]})});};export default Chat;","map":{"version":3,"names":["React","useEffect","useState","user","socketIo","sendLogo","Message","ReactScrollToBottom","closeIcon","jsx","_jsx","jsxs","_jsxs","socket","ENDPOINT","Chat","_useState","_useState2","_slicedToArray","id","setid","_useState3","_useState4","messages","setMessages","send","message","document","getElementById","value","emit","console","log","transports","on","alert","data","concat","_toConsumableArray","off","className","children","href","src","alt","map","item","i","classs","onKeyPress","event","key","type","onClick"],"sources":["C:/Users/dell/Desktop/ChatBot/server/chatbotapp/src/component/chat/chat.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { user } from \"../join/join\";\r\nimport socketIo from 'socket.io-client';\r\nimport \"./chat.css\";\r\nimport sendLogo from '../../images/sendlogo.jpg';\r\nimport Message from '../Message/Message';\r\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\r\nimport closeIcon from \"../../images/closeIcon.png\"; \r\n\r\nlet socket;\r\n\r\nconst ENDPOINT = \"http://localhost:4500/\";\r\n\r\n\r\nconst Chat = () => {\r\n\r\n    const [id, setid] = useState(\"\");\r\n    const [messages, setMessages] = useState([])\r\n    const send = () => {\r\n        const message = document.getElementById('chatInput').value;\r\n        socket.emit('message', { message, id });\r\n        document.getElementById('chatInput').value = \"\";\r\n    }\r\n\r\n    console.log(messages);\r\n    useEffect(() => {\r\n        socket = socketIo(ENDPOINT, { transports: ['websocket'] });\r\n\r\n        socket.on(\"connect\", () => {\r\n            alert(\"Connected\");\r\n            setid(socket.id);\r\n        })\r\n\r\n        console.log(socket);\r\n        socket.emit('joined', { user })\r\n\r\n        socket.on('welcome', (data) => {\r\n            setMessages([...messages,data]);\r\n            console.log(data.user, data.message);\r\n        })\r\n\r\n        socket.on('userJoined', (data) => {\r\n            setMessages([...messages,data]);\r\n            console.log(data.user, data.message);\r\n        })\r\n\r\n        socket.on('leave', (data) => {\r\n            setMessages([...messages,data]);\r\n            console.log(data.user, data.message);\r\n        })\r\n\r\n\r\n        return () => {\r\n            socket.on('disconnect'); //iske jagah socket.emit aayega par front end render nhi karta iska dekh \r\n            socket.off();\r\n\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        socket.on('sendMessage', (data) => {\r\n            setMessages([...messages,data]);\r\n            console.log(data.user, data.message, data.id);\r\n        })\r\n\r\n        return () => {\r\n            socket.off();\r\n\r\n        }\r\n    }, [messages])\r\n\r\n\r\n\r\n    return (\r\n        <div className='chatPage'>\r\n            <div className='chatContainer'>\r\n                <div className='header'>\r\n                    <h2>Chat App</h2>\r\n                  <a href=\"/\"> <img src={closeIcon} alt=\"Close\" /> </a>\r\n                </div>\r\n                <ReactScrollToBottom className='chatBox'>\r\n                    {messages.map((item,i)=><Message user={item.id===id?'':item.user} message={item.message}  classs={item.id===id?'right':'left'}      />)}\r\n                </ReactScrollToBottom>\r\n                <div className='inputBox'>\r\n                    <input onKeyPress={(event)=>event.key === 'Enter' ? send(): null} type=\"text\" id=\"chatInput\" />\r\n                    {/* <input type=\"text\" id=\"chatInput\" /> */}\r\n                    <button onClick={send} className='sendBtn'><img src={sendLogo} alt=\"send\" /></button>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}